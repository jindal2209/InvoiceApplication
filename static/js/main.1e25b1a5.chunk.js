(this.webpackJsonpinvoice=this.webpackJsonpinvoice||[]).push([[0],{40:function(e,t,c){},41:function(e,t,c){},67:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(33),i=c.n(s),r=(c(40),c(41),c(10)),l=c(3),o=c(0);var j=function(){return Object(o.jsx)("div",{children:Object(o.jsx)("header",{className:"bg-light p-3 fw-bold border",children:Object(o.jsx)(r.b,{to:"/",className:"text-decoration-none text-dark",children:"Invoice Application"})})})};var b=function(){return Object(n.useEffect)((function(){}),[]),Object(o.jsxs)("div",{className:"container py-3",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("div",{className:"float-start",children:Object(o.jsx)("img",{src:"/InvoiceApplication/logo.png",height:"80",alt:"logo"})}),Object(o.jsx)("div",{className:"float-end h1",children:"Invoice"})]})}),Object(o.jsx)("div",{className:"row mt-5",children:Object(o.jsxs)(r.b,{to:"/create_invoice",children:[" ",Object(o.jsx)("button",{className:"btn btn-primary btn-lg",children:"Create Invoice"})]})}),Object(o.jsx)("div",{className:"row my-2",children:Object(o.jsxs)(r.b,{to:"/add_item",children:[" ",Object(o.jsx)("button",{className:"btn btn-primary btn-lg",children:"Add Items"})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)(r.b,{to:"/check_invoice_status",children:[" ",Object(o.jsx)("button",{className:"btn btn-primary btn-lg",children:"Check Invoice Status"})]})})]})},m=c(12),d=c(2),u=c(5),h=c.n(u);function O(e){var t=Object(n.useState)(0),c=Object(d.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(0),r=Object(d.a)(i,2),l=r[0],j=r[1],b=Object(n.useState)(0),u=Object(d.a)(b,2),h=u[0],O=u[1],x=Object(n.useState)("-1"),p=Object(d.a)(x,2),f=p[0],v=p[1],N=e.invoiceItems,_=e.itemsList,g=e.setTotalAmount,y=e.deleteInvoiceItem,I=e.setInvoiceItem;return Object(n.useEffect)((function(){g((function(e){return e-l+a*h})),j((function(e){return a*h}))}),[a]),Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"text-center",scope:"row",children:f}),Object(o.jsx)("td",{className:"text-center",children:Object(o.jsxs)("select",{children:[Object(o.jsx)("option",{children:"SELECT"}),_.map((function(e,t){return Object(o.jsx)("option",{onClick:function(){return function(e){O(e.item_price),v(e.item_no);var t=Object(m.a)(N);t=t.filter((function(e){return e.item_no!==f})),e.quantity=a,e.item_total_price=l,t.push(e),I(t)}(e)},children:e.item_name},t)}))]})}),Object(o.jsxs)("td",{className:"text-center",children:[Object(o.jsx)("button",{className:"btn btn-sm btn-outline-primary mx-2",onClick:function(){s((function(e){return e<=0?0:e-1}));var e=_.filter((function(e){return e.item_no===f}));e=e[0];var t=Object(m.a)(N);t=t.filter((function(e){return e.item_no!==f})),e.quantity=a<=0?0:a-1,e.item_total_price=e.quantity*e.item_price,t.push(e),I(t)},children:Object(o.jsx)("i",{className:"bi bi-dash"})}),Object(o.jsx)("span",{className:"px-2",children:a}),Object(o.jsx)("button",{className:"btn btn-sm btn-outline-primary mx-2",onClick:function(){s((function(e){return e+1}));var e=_.filter((function(e){return e.item_no===f}));e=e[0];var t=Object(m.a)(N);t=t.filter((function(e){return e.item_no!==f})),e.quantity=a+1,e.item_total_price=(a+1)*e.item_price,t.push(e),I(t)},children:Object(o.jsx)("i",{className:"bi bi-plus"})})]}),Object(o.jsx)("td",{className:"text-center",children:h}),Object(o.jsx)("td",{className:"text-center",children:l}),Object(o.jsx)("td",{className:"text-center",children:Object(o.jsx)("button",{className:"btn btn-sm btn-danger",onClick:function(){g((function(e){return e-l})),y(f)},children:Object(o.jsx)("i",{className:"bi bi-trash-fill"})})})]})}var x=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)([]),i=Object(d.a)(s,2),r=(i[0],i[1]),l=Object(n.useState)(""),j=Object(d.a)(l,2),b=j[0],u=j[1],x=Object(n.useState)(""),p=Object(d.a)(x,2),f=p[0],v=p[1],N=Object(n.useState)(0),_=Object(d.a)(N,2),g=_[0],y=_[1],I=Object(n.useState)([]),k=Object(d.a)(I,2),S=k[0],C=k[1],w=new Date;function P(e){var t=Object(m.a)(S);t=t.filter((function(t){return t.item_no!==e})),console.log(t),C(t)}return Object(n.useEffect)((function(){h.a.get("get_companies/").then((function(e){r(e.data),h.a.get("get_items/").then((function(e){a(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}),[]),Object(o.jsxs)("div",{className:"container py-3",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("div",{className:"float-start",children:Object(o.jsx)("img",{src:"/InvoiceApplication/logo.png",height:"80",alt:"logo"})}),Object(o.jsx)("div",{className:"float-end h1",children:"Invoice"})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",children:[Object(o.jsx)("div",{className:"mb-5 mt-3",children:Object(o.jsxs)("div",{className:"customer-info",children:[Object(o.jsxs)("b",{children:["Billing Date: ",w.toLocaleDateString()]}),Object(o.jsx)("br",{}),Object(o.jsx)("b",{children:"Bill To:"}),Object(o.jsxs)("div",{className:"row g-3",children:[Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{htmlFor:"inputname",className:"form-label",children:"Customer Name"}),Object(o.jsx)("input",{type:"text",className:"form-control form-control-sm",id:"inputname",placeholder:"Customer Name",value:b,onChange:function(e){return u(e.target.value)}})]}),Object(o.jsxs)("div",{className:"col-md-6",children:[Object(o.jsx)("label",{htmlFor:"inputEmail4",className:"form-label form-label-sm",children:"CustomerEmail"}),Object(o.jsx)("input",{type:"email",className:"form-control form-control-sm",id:"inputEmail4",placeholder:"Customer Email",value:f,onChange:function(e){return v(e.target.value)}})]})]})]})}),Object(o.jsxs)("table",{className:"table",children:[Object(o.jsx)("thead",{className:"table-dark",children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Item ID"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Item Name"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Quantity"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Price (Rs)"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Total Price (Rs)"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Remove"})]})}),Object(o.jsx)("tbody",{children:S.map((function(e,t){return Object(o.jsx)(O,{invoiceItems:S,itemsList:c,setInvoiceItem:C,setTotalAmount:y,deleteInvoiceItem:P},t)}))})]}),Object(o.jsx)("div",{className:"float-end text-end",children:Object(o.jsxs)("b",{children:["Total Amount: Rs ",g]})}),Object(o.jsx)("button",{className:"float-start btn btn-sm btn-success",onClick:function(){c.length!==S.length?C((function(e){return[].concat(Object(m.a)(e),[{item_no:"-1",item_name:"",item_price:0,quantity:0,item_total_price:0}])})):alert("Cannot add items more than the number of available items check for duplicate enteries in invoice")},children:Object(o.jsx)("i",{className:"bi bi-plus-lg"})})]})}),Object(o.jsx)("div",{className:"row px-5 mx-5 mt-5",children:Object(o.jsx)("button",{className:"btn btn-primary",onClick:function(){0!==S.length&&0!==g?""!==f.trim()?""!==b.trim()?h.a.post("create_invoice/",{customer_name:b,customer_email:f,company_id:1,total_amount:g,items_list:S}).then((function(e){alert("invoice created your invoice number is: ".concat(e.data.invoice_id))})).catch((function(e){console.log(e)})):alert("Please add customer name"):alert("Please add customer email"):alert("Please add atleast one item")},children:"Generate Invoice"})})]})},p=c(22),f=c.n(p),v=c(23),N=c(35);function _(e){return new Promise((function(t){var c=document.createElement("script");c.src=e,c.onload=function(){t(!0)},c.onerror=function(){t(!1)},document.body.appendChild(c)}))}var g=function(){var e=Object(l.f)().invoice_id,t=Object(n.useState)(""),c=Object(d.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(""),r=Object(d.a)(i,2),j=r[0],b=r[1],m=Object(n.useState)(""),u=Object(d.a)(m,2),O=u[0],x=u[1],p=Object(n.useState)(""),g=Object(d.a)(p,2),y=g[0],I=g[1],k=Object(n.useState)(0),S=Object(d.a)(k,2),C=S[0],w=S[1],P=Object(n.useState)(""),E=Object(d.a)(P,2),A=E[0],T=E[1],D=Object(n.useState)([]),R=Object(d.a)(D,2),q=R[0],z=R[1];function F(){return L.apply(this,arguments)}function L(){return(L=Object(N.a)(f.a.mark((function t(){var c,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_("https://checkout.razorpay.com/v1/checkout.js");case 2:if(t.sent){t.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),t.abrupt("return");case 6:c={},n={},h.a.post("create_order/",{amount:C}).then((function(t){c=t.data,n={key:c.razorpay_merchant_key,currency:c.currency,amount:c.razorpay_amount.toString(),order_id:c.razorpay_order_id,name:"Invoice-".concat(e," Payment"),description:"Thank you for paying invoice. Please give us some money",callback_url:c.callback_url,handler:function(t){h.a.post(c.callback_url,Object(v.a)(Object(v.a)({},t),{},{amount:c.razorpay_amount,customer_name:a,customer_email:j,invoice_id:e})).then((function(e){alert("Payment Successful"),window.location.reload()}))},prefill:{name:a,email:j}},new window.Razorpay(n).open()})).catch((function(e){console.log("error: ",e)}));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){h.a.get("invoice/".concat(e)).then((function(e){var t=e.data;x(t.company_name),I(t.invoice_date),s(t.customer_name),b(t.customer_email),w(t.total_amount),T(t.invoice_status),z(t.items_data)})).catch((function(e){return alert(e)}))}),[e]),Object(o.jsxs)("div",{className:"container py-3",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-12",children:[Object(o.jsx)("div",{className:"float-start",children:Object(o.jsx)("img",{src:"/InvoiceApplication/logo.png",height:"80",alt:"logo"})}),Object(o.jsx)("div",{className:"float-end h1",children:"Invoice"})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",children:[Object(o.jsx)("div",{className:"mb-4 mt-3",children:Object(o.jsxs)("div",{className:"customer-info",children:[Object(o.jsxs)("div",{className:"float-end text-end",children:[Object(o.jsxs)("b",{children:["Status: ",A]}),Object(o.jsx)("br",{}),"pending"===A?Object(o.jsx)("button",{className:"btn btn-primary",onClick:F,children:"Pay Now"}):"overdue"===A?Object(o.jsx)("button",{className:"btn btn-danger",onClick:F,children:"Overdue"}):Object(o.jsx)("div",{className:"btn btn-success",children:"Paid"})]}),Object(o.jsxs)("b",{children:["Company: ",O]}),Object(o.jsx)("br",{}),Object(o.jsxs)("b",{children:["Billing Date: ",y]}),Object(o.jsx)("br",{}),Object(o.jsxs)("b",{children:["Billed To: ",a]}),Object(o.jsx)("br",{}),Object(o.jsxs)("b",{children:["Email ID: ",j]})]})}),Object(o.jsxs)("table",{className:"table",children:[Object(o.jsx)("thead",{className:"table-dark",children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Item ID"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Item Name"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Quantity"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Price (Rs)"}),Object(o.jsx)("th",{className:"text-center",scope:"col",children:"Total Price (Rs)"})]})}),Object(o.jsx)("tbody",{children:q.map((function(e,t){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{className:"text-center",scope:"row",children:e.item_id}),Object(o.jsx)("td",{className:"text-center",children:e.item_name}),Object(o.jsx)("td",{className:"text-center",children:e.quantity}),Object(o.jsx)("td",{className:"text-center",children:e.item_price}),Object(o.jsx)("td",{className:"text-center",children:e.item_price*e.quantity})]},t)}))})]}),Object(o.jsx)("div",{className:"float-end text-end",children:Object(o.jsxs)("b",{children:["Total Amount: Rs ",C]})})]})})]})};var y=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),i=Object(d.a)(s,2),r=i[0],l=i[1];return Object(o.jsxs)("div",{className:"container mt-3",children:[Object(o.jsx)("h1",{className:"mb-3",children:"Add Item"}),Object(o.jsx)("input",{className:"mx-2",type:"text",placeholder:"Item Name",val:c,onChange:function(e){return a(e.target.value)}}),Object(o.jsx)("input",{className:"mx-2",type:"text",placeholder:"Item Price",val:r,onChange:function(e){return l(e.target.value)}}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{className:"btn btn-primary p-1 m-2",onClick:function(){""!==c.trim()&&""!==r.trim()?h.a.post("create_item/",{item_name:c,item_price:r}).then((function(e){alert("item added successfully")})).catch((function(e){alert("Error in adding data try again later")})):alert("please fill the details correctly")},children:"Add Item"}),Object(o.jsx)("br",{})]})};var I=function(){var e=Object(n.useState)(""),t=Object(d.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(Object(o.jsx)("div",{})),i=Object(d.a)(s,2),l=i[0],j=i[1];return Object(o.jsxs)("div",{className:"container mt-3",children:[Object(o.jsx)("h1",{className:"mb-3",children:"Check Status"}),Object(o.jsx)("input",{className:"mx-2",type:"text",placeholder:"Invoice Number",val:c,onChange:function(e){return a(e.target.value)}}),Object(o.jsx)("br",{}),Object(o.jsx)("button",{className:"btn btn-primary p-1 m-2",onClick:function(){0!==c.length?h.a.get("invoice/".concat(c)).then((function(e){j(Object(o.jsx)(r.b,{to:"invoice/".concat(c),className:"text-success fw-bold h5 mx-2",children:"Check Status here"}))})).catch((function(e){j(Object(o.jsx)("span",{className:"text-danger fw-bold h5 mx-2",children:"Invoice Number not found"}))})):j(Object(o.jsx)("span",{className:"text-danger fw-bold h5 mx-2",children:"Enter Invoice Number"}))},children:"Check Status"}),Object(o.jsx)("br",{}),l]})};var k=function(){return Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)(r.a,{children:[Object(o.jsx)(j,{}),Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{exact:!0,path:"/",children:Object(o.jsx)(b,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/create_invoice",children:Object(o.jsx)(x,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/add_item",children:Object(o.jsx)(y,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/check_invoice_status",children:Object(o.jsx)(I,{})}),Object(o.jsx)(l.a,{exact:!0,path:"/invoice/:invoice_id",children:Object(o.jsx)(g,{})}),Object(o.jsxs)(l.a,{children:[Object(o.jsx)("div",{children:"404 NOT FOUND"})," "]})]})]})})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,68)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;c(e),n(e),a(e),s(e),i(e)}))};h.a.defaults.baseURL="https://invoapi.herokuapp.com/",i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(k,{})}),document.getElementById("root")),S()}},[[67,1,2]]]);
//# sourceMappingURL=main.1e25b1a5.chunk.js.map